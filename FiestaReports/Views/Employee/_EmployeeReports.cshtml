@model FiestaReports.Models.EmployeeReports
@{
    @Html.HiddenFor(m=> m.Employee.EmpId)
    var fullName = string.Format("{0} {1}", Model.Employee.FirstName, Model.Employee.LastName);
}

<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Edit Reports Assigned</h4>
    </div>
    <div class="modal-body">
        <form class="form-horizontal">
            <div class="form-group">
                <div class="col-md-1 col-md-offset-1">
                    <label for="fillname">Name</label>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control col-md-2" id="txtFullName" disabled="disabled" value="@fullName">
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-10">
                    <table>
                        <tr>
                            <th></th>
                            @{foreach (var report in Model.Reports)
                                {
                                    <th style="width:auto" class="text-center">@report.ReportName</th>
                                }
                            }
                        </tr>
                        @{foreach (var store in Model.Stores)
                            {
                                <tr>
                                    <td class="text-primary col-md-2">@store.City</td>
                                    @{foreach (var report in Model.Reports)
                                        {
                                            var chkId = string.Format("{0}_{1}", store.StoreNo, report.ReportId.ToString());
                                            var isAssigned = Model.EmpStoreReports.Any(x => x.StoreNo == store.StoreNo && x.ReportId == report.ReportId) ? "checked" : string.Empty;
                                            <td class="text-center"><input type="checkbox" id="@chkId" @isAssigned /></td>
                                        }
                                    }
                                </tr>
                            }
                        }
                    </table>
                    

                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="btnAssignReports">Save changes</button>
    </div>
</div>

